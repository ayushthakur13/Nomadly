<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{trip.tripName}}</title>
    <link rel="stylesheet" href="/styles/components/style.css">
    <link rel="stylesheet" href="/styles/explore/explore-trip-detail.css">
</head>
<body>
    {{>navbar}}

    <main class="explore-detail-page">
        <a href="javascript:history.back()" class="btn-back-fixed">â†</a>

        <div class="explore-detail-container">
            <section class="trip-header">
                <div class="trip-header-img" style="background-image: url('{{trip.imageUrl}}');"></div>
                <div class="trip-header-info">
                    <div class="header-top">
                        <h1 class="trip-name">{{trip.tripName}}</h1>
                        <span class="category-badge-explore">{{trip.category}}</span>
                    </div>
                    <p class="trip-destination">ğŸ“ {{trip.mainDestination}}</p>
                    <p class="trip-dates">
                        ğŸ—“ï¸ {{formatDate trip.startDate}} - {{formatDate trip.endDate}} ({{calculateTripDuration trip.startDate trip.endDate}})
                    </p>
                    {{#if trip.description}}
                        <p class="trip-description">{{trip.description}}</p>
                    {{/if}}
                </div>
            </section>

            <section class="trip-section">
                <h2 class="section-title">ğŸ—ºï¸ Destinations</h2>
                <div class="destinations-list grid">
                    {{#each trip.destinations}}
                        <div class="destination-card">
                            <h3>{{this.name}}</h3>
                            <p class="destination-date">ğŸ“… {{formatDate this.date}}</p>
                            <p class="destination-location">ğŸ“ {{this.location}}</p>
                            {{#if this.notes}}<p class="destination-notes">ğŸ“ {{this.notes}}</p>{{/if}}
                        </div>
                    {{/each}}
                </div>
            </section>

            {{#if trip.tasks.length}}
                <section class="trip-section">
                    <h2 class="section-title">âœ… Tasks</h2>
                    <ul class="task-list">
                        {{#each trip.tasks}}
                            <li class="task-item">
                                <span class="check-icon">âœ”ï¸</span>
                                {{this.title}}
                            </li>
                        {{/each}}
                    </ul>
                </section>
            {{/if}}

            {{#if trip.budget.expenses.length}}
                <section class="trip-section">
                    <h2 class="section-title">ğŸ’° Budget & Expenses</h2>
                    <div class="budget-summary">
                        <div class="total-budget">
                            <span class="budget-label">Total Budget:</span>â‚¹{{trip.budget.total}} 
                        </div>
                        <div class="remaining-budget">
                            <span class="budget-label">Remaining:</span>â‚¹{{calculateRemaining trip.budget.total trip.budget.expenses}} 
                        </div>
                    </div>

                    <div class="expenses-list grid">
                        {{#each trip.budget.expenses}}
                            <div class="expense-card">
                                <p class="expense-category">ğŸ“‚ {{this.category}}</p>
                                <p class="expense-amount">ğŸ’¸ â‚¹{{this.amount}}</p>
                                {{#if this.description}}<p class="expense-desc">ğŸ“ {{this.description}}</p>{{/if}}
                                <p class="expense-date">ğŸ“… {{formatDate this.date}}</p>
                            </div>
                        {{/each}}
                    </div>
                </section>
            {{/if}}

            {{#if trip.accommodations.length}}
                <section class="trip-section">
                    <h2 class="section-title">ğŸ¨ Accommodations</h2>
                    <div class="accommodation-list">
                        {{#each trip.accommodations}}
                        <div class="accommodation-card">
                            <h3>{{this.name}}</h3>
                            <p class="address">ğŸ“ {{this.address}}</p>
                            <p class="dates">ğŸ›ï¸ {{formatDate this.checkIn}} - {{formatDate this.checkOut}}</p>
                            {{#if this.notes}}<p class="notes">ğŸ“ {{this.notes}}</p>{{/if}}
                        </div>
                        {{/each}}
                    </div>
                </section>
            {{/if}}

            <section class="clone-trip-section">
                <h2 class="clone-heading">Inspired by this journey?</h2>
                <p class="clone-subtext">Make it yours. Customize and start your own adventure based on this trip.</p>
                <a href="/trips/clone/{{trip._id}}" class="btn btn-primary clone-btn">Add to My Trips</a>
            </section>
        </div>
    </main>

    {{>footer}}
</body>
</html>
